<div class="container">
  <div class="text-right">
    <div class="py-3">
      <%= link_to '/posts' ,class:"btn" do %>
        <i class="fa-solid fa-xmark fa-xl normal_btn "></i>
      <% end %>
    </div>

  </div>
  <div class="d-flex justify-content-between py-3">
    <div class="d-flex flex-row align-items-center">
      <div class="mr-3">
        <% if @user %>
          <%= link_to user_path(@user.id) do %>
              <%= image_tag @user.get_profile_image(100, 100), class: "img-fluid rounded-circle", style: "width: 40px; height: 40px; object-fit: cover;" %>
          <% end %>
        <% end %>
      </div>
      <div>
        <% if @user %>
          <span>
            <%= link_to user_path(@user.id) do %>
              <b><%= @user.name %></b>
            <% end %>
          </span>
        <% end %>
      </div>
    </div>
    <div class="py-3 d-flex justify-content-end align-items-center">
      <% if @post.user_id == current_user.id %>
        <%= link_to post_path(@post.id), method: :delete, "data-confirm" => "本当に消しますか？" ,class:"mr-4" do %>
          <i class="fa-solid fa-trash fa-xl normal_btn"></i>
        <% end %>
          <%= link_to "編集", edit_post_path(@post.id) ,class:"btn edit_btn" %>
        <% else %>
          <div class="py-3"></div>
      <% end %>
    </div>
  </div>
  <div class="d-flex flex-row justify-content-center">
    <div class="col-6">
      <div class="text-center">
        <% if @post.image.attached? %>
          <%= image_tag @post.image, class: "img-fluid rounded" , style: "width: 300px; height: auto;" %>
        <% else %>
          <p>No Image</p>
        <% end %>
      </div>
    </div>
    <div class="col-6">
      <h2 class="mb-2">Title</h2>
      <p class="mb-2"><%= @post.title %></p>
      <h2 class="mb-2">Body</h2>
      <p class="mb-2"><%= @post.body %></p>
      <p class="text-right"><%= @post.created_at.strftime('%Y/%m/%d') %></p>
    </div>
  </div>

  <div>
    <p>コメント件数：<%= @post.comments.count %></p>
    <% @post.comments.each do |comment| %>
      <p><%= image_tag comment.user.get_profile_image(100,100) %></p>
      <%= comment.user.name %>
      <%= comment.created_at.strftime('%Y/%m/%d') %><%= comment.body %>
      <% if comment.user == current_user %>
        <%= link_to "削除", post_comment_path(comment.post, comment), method: :delete %>
      <% end %>
    <% end %>
  </div>
<div>
  <%= form_with model: [@post, @comment] do |f| %>
    <%= f.text_area :comment, rows: '5', placeholder: "コメントをここに" %>
    <%= f.submit "送信する" %>
  <% end %>
</div>
</div>


